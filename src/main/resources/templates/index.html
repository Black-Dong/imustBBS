<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>imustBBS</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>

    <link rel="stylesheet" href="/css/imustBBS.css">

    <!-- 最新版本的 Bootstrap 核心 CSS 文件 -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- 可选的 Bootstrap 主题文件（一般不用引入） -->
    <link rel="stylesheet" href="/css/bootstrap-theme.min.css">

</head>
<body>

<div th:replace="navigation :: nav"></div>


<div class="main container-fluid">
    <div class="row">
        <div class="col-lg-9 col-md-12 col-sm-12 col-xs-12 left-container">

            <h2><span class="glyphicon glyphicon-list" aria-hidden="true"></span> 发现</h2>
            <hr>
            <div th:if="${pageInfo != null}">
                <div class="media borderBottom paddingBottom-5" th:each="post : ${pageInfo.getList()}">
                    <div class="media-left">
                        <a href="#">
                            <img class="media-object img-rounded avatar-size" th:src="${post.getUser().getAvatarUrl()}"
                                 src="https://avatars3.githubusercontent.com/u/42092762?v=4" alt="...">
                        </a>
                    </div>
                    <div class="media-body">
                        <h4 class="media-heading">
                            <a th:href="@{/post/{id}(id=${post.getId()})}" th:text="${post.getTitle()}" target="_blank"></a>
                        </h4>
                        <span class="post-about"><span th:text="${post.getCommentCount()}">2</span> 个回复 · <span
                                th:text="${post.getViewCount()}">2</span> 次浏览 · <span
                                th:text="${#dates.format(post.getUpdateTime(),'yyyy-MM-dd HH:mm')}">2</span> 更新</span>
                    </div>
                </div>

                <div class="row">
                    <nav aria-label="Page navigation">
                        <ul class="pagination">
                            <li th:if="${pageInfo.getPageNum()-4 > 0}">
                                <a href="#" aria-label="First" th:href="@{/(pageNumber=1)}">
                                    <span aria-hidden="true">&laquo;</span>
                                </a>
                            </li>
                            <li>
                                <a href="#" aria-label="Previous" th:href="@{/(pageNumber=${pageInfo.getPrePage()})}"
                                   th:if="${pageInfo.hasPreviousPage == true}">
                                    <span aria-hidden="true">&lt;</span>
                                </a>
                            </li>
                            <!-- 7页展示 -->
                            <li th:if="${pageInfo.getPages() <= 7} "
                                th:each="pageNumber : ${#numbers.sequence(1,pageInfo.getPages())}"
                                th:class="${pageNumber == pageInfo.getPageNum()} ? 'active':''">
                                <a th:href="@{/(pageNumber=${pageNumber})}" th:text="${pageNumber}">1</a>
                            </li>
                            <li th:if="${pageInfo.getPages() > 7 && pageInfo.getPageNum()-3 <= 1} "
                                th:each="pageNumber : ${#numbers.sequence(1,7)}"
                                th:class="${pageNumber == pageInfo.getPageNum()} ? 'active':''">
                                <a th:href="@{/(pageNumber=${pageNumber})}" th:text="${pageNumber}">1</a>
                            </li>
                            <li th:if="${pageInfo.getPages() > 7 && pageInfo.getPageNum()-3 > 1 && pageInfo.getPageNum()+3 < pageInfo.getPages()}"
                                th:each="pageNumber : ${#numbers.sequence(pageInfo.getPageNum()-3,pageInfo.getPageNum()+3)}"
                                th:class="${pageNumber == pageInfo.getPageNum()} ? 'active':''">
                                <a th:href="@{/(pageNumber=${pageNumber})}" th:text="${pageNumber}">1</a>
                            </li>
                            <li th:if="${pageInfo.getPages() > 7 && pageInfo.getPageNum()-3 > 1 && pageInfo.getPageNum()+3 >= pageInfo.getPages()}"
                                th:each="pageNumber : ${#numbers.sequence(pageInfo.getPages()-6,pageInfo.getPages())}"
                                th:class="${pageNumber == pageInfo.getPageNum()} ? 'active':''">
                                <a th:href="@{/(pageNumber=${pageNumber})}" th:text="${pageNumber}">1</a>
                            </li>


                            <li>
                                <a href="#" aria-label="Next" th:href="@{/(pageNumber=${pageInfo.getNextPage()})}"
                                   th:if="${pageInfo.hasNextPage == true}">
                                    <span aria-hidden="true">&gt;</span>
                                </a>
                            </li>
                            <li th:unless="${pageInfo.getPageNum() + 4 > pageInfo.getPages()}">
                                <a href="#" aria-label="Last" th:href="@{/(pageNumber=${pageInfo.getPages()})}">
                                    <span aria-hidden="true">&raquo;</span>
                                </a>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>


        <div class="col-lg-3 col-md-12 col-sm-12 col-xs-12">
            <h3>热门话题</h3><br>
        </div>
    </div>
</div>

<script src="/js/jquery-3.4.1.min.js"></script>
<!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
<script src="/js/bootstrap.min.js"></script>
</body>
</html>